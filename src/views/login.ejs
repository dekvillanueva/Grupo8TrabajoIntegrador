<!DOCTYPE html>
<html lang="en">
<!--
 ***********   HEAD   **************************************************
-->

<div>
  <%- include('partials/head.ejs', {title: 'ESSENSOR - Login'})%>
  <link rel="stylesheet" href="css/loginStyle.css" />
  <title>ESSENSOR Login</title>
</div>

<!--
 ***********   BODY   **************************************************
-->

<body>
  <!--
 ***********   HEADER   ***********************************************
-->
  <div>
    <%- include('partials/header.ejs')%>
  </div>

  <main>
    <form action="/login" method="POST">
      <div class="main-container">
        <div class="main-container-title">
          <h2 class="title">Bienvenido</h2>
        </div>
        <div class="main-container-option-select">
          <div class="main-container-option-select-signin">
            <input type="radio" name="option" id="signin" value="signin" checked />
            <label for="signin">
              <a href="">Iniciar sesi√≥n</a>
            </label>
          </div>
          <div class="main-container-option-select-signout">
            <input type="radio" name="option" id="signout" value="signout" />
            <label for="signout">
              <a href="/userRegister">Crear cuenta</a>
            </label>
          </div>
        </div>

        <div class="main-container-text-inputs-email">
          <div class="rounder-container">
            <label for="email">Email</label>
            <div class="text-input-with-icon">
              <i class="material-icons">email</i>
              <% if(!isFromGet && oldData){ %>
              <input class="form-control" type="text" name="userEmail" value="<%=oldData.userEmail%>" id="email"
                onkeyup="checkEmailInput(event)" required />
              <% } else{ %>
              <input class="form-control " type="text" name="userEmail" placeholder="example@gmail.com" id="email"
                onkeyup="checkEmailInput(event)" required />
              <% } %>
            </div>
          </div>
          <div>
            <%if(!isFromGet && errors && errors.userEmail){%>
            <label style="color: Red;">
              <%= errors.userEmail.msg%>
            </label>
            <%}%>
          </div>
        </div>
        <div class="main-container-text-inputs-clave">
          <div class="rounder-container">
            <label for="password">Clave</label>
            <div class="text-input-with-icon">
              <i class="material-icons">lock</i>
              <% if(!isFromGet && oldData){ %>
            <input class="form-control " type="password" onkeyup="checkPaswordInput(event)" name="userPassword"
              id="password" value="<%=oldData.password%>" required />
            <% } else{ %>
            <input class="form-control " type="password" onkeyup="checkPaswordInput(event)" name="userPassword"
              id="password" required />
            <% } %>
          </div>
        </div>
        <%if(!isFromGet && errors && errors.userPassword){%>
        <label style="color: Red;">
          <%= errors.userPassword.msg%>
        </label>
        <%}%>
        </div>

        <div class="main-container-text-inputs-email">
          <div class="rounder-container">
            <div class="form-check" style="display: flex; align-items: center; justify-content: center;">
              <input class="form-check-input" type="checkbox" name="rememberUser" id="flexCheckDefault">
              <label class="form-check-label" style="margin-left: 5px;" for="flexCheckDefault">Recordar mi usuario</label>
            </div>
          </div>
        </div>

        <div class="main-container-text-inputs-button">
          <button class="btn btn-primary" type="submit">
            Iniciar
          </button>
        </div>

      </div>
    </form>
  </main>

  <!--
 ***********   FOOTER   **********************************************************
-->
  <div>
    <%- include('partials/footer.ejs')%>
      </div>


      <!--
 ***********  VALIDATIONS SCRIPTS   **********************************************************
-->
      <script type="text/javascript">
        function checkPaswordInput(event) {
          const inputPassword = document.querySelector("#password");
          let value = document.getElementById("password").value;
          if (value.length < 8) {
            inputPassword.classList.remove("is-valid");
            inputPassword.classList.add("is-invalid");
          } else {
            inputPassword.classList.add("is-valid");
            inputPassword.classList.remove("is-invalid");
          }
        }

        function checkEmailInput(event) {
          const inputEmail = document.querySelector("#email");
          let value = document.getElementById("email").value;
          if (!isEmail(value)) {
            inputEmail.classList.remove("is-valid");
            inputEmail.classList.add("is-invalid");
          } else {
            inputEmail.classList.add("is-valid");
            inputEmail.classList.remove("is-invalid");
          }
        }

        function isEmail(email) {
          return /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i
            .test(email);
        }
      </script>
      <!--
 ***********   BOOSTRAP SCRIPTS   **********************************************************
-->
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
        integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous">
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"
        integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous">
      </script>

</body>

</html>